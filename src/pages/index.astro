---
const posts = await Astro.glob('./journal/*.md');
const sortedPosts = posts.sort((a, b) => 
  new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
---

<html lang="ja">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<title>Tomohiro Ogawa</title>
		<style>
			/* Swiss Style Reset */
			* { box-sizing: border-box; }
			
			body {
				font-family: "Helvetica Neue", Arial, sans-serif;
				background-color: #fff;
				color: #111;
				margin: 0;
				display: flex;
				justify-content: center;
				/* コンテンツが少なくても線が画面下まで伸びるようにする */
				min-height: 100vh;
			}

			/* The Structural Container */
			.grid-container {
				width: 100%;
				max-width: 720px; /* Max Bill Width */
				/* 上下の余白は無くし、線が画面端まで届くようにする（必要ならpaddingを入れる） */
				padding: 4rem 2rem; 
				display: flex;
			}

			/* THE AXIS: すべての要素の親となる「線」 */
			.axis-spine {
				/* 線を黒く、明確にする */
				border-left: 1px solid #111; 
				padding-left: 3rem; /* 線と文字の距離を固定 */
				min-height: 100%; /* 親の高さに合わせて伸びる */
				width: 100%;
			}

			header {
				margin-bottom: 5rem;
				position: relative;
			}

			/* Headerの横線（タイトルの開始位置を示す） */
			header::before {
				content: '';
				position: absolute;
				left: -3rem; /* padding-left分戻る＝線の上 */
				top: 0.6em; /* 文字の中心 */
				width: 12px;
				height: 1px;
				background-color: #111;
			}

			h1 {
				font-size: 1.2rem;
				font-weight: 700;
				letter-spacing: 0.05em;
				margin: 0 0 0.2rem 0;
				text-transform: uppercase;
				line-height: 1;
			}
			.subtitle {
				font-size: 0.75rem;
				color: #666;
				display: block;
				margin-top: 0.5rem;
			}

			/* List Structure */
			ul {
				list-style: none;
				padding: 0;
				margin: 0;
			}

			.entry {
				position: relative;
				padding-bottom: 4rem;
			}

			/* THE TICK: 記事の目盛り */
			.entry::before {
				content: '';
				position: absolute;
				/* パディング分戻すことで、確実に縦線と交差させる */
				left: -3rem; 
				top: 0.5em; /* 日付の中心に合わせる */
				width: 12px; /* 長さをHeaderと統一 */
				height: 1px;
				background-color: #111;
			}

			.meta {
				font-family: monospace;
				font-size: 0.75rem;
				color: #666; /* 少し濃くして視認性確保 */
				margin-bottom: 0.5rem;
				display: flex;
				gap: 1.5rem; /* 番号と日付の距離 */
				align-items: center;
				line-height: 1;
			}

			.title-link {
				display: block;
				text-decoration: none;
				color: #111;
				font-size: 1.4rem; /* サイズアップして強さを出す */
				font-weight: 400;
				line-height: 1.3;
				transition: opacity 0.2s;
			}
			.title-link:hover { opacity: 0.6; }
		</style>
	</head>
	<body>
		<div class="grid-container">
			<div class="axis-spine">
				<header>
					<h1>Tomohiro Ogawa</h1>
					<span class="subtitle">Poet of Technology</span>
				</header>

				<main>
					<ul>
						{sortedPosts.map((post, index) => {
							const entryNumber = String(sortedPosts.length - index).padStart(3, '0');
							return (
								<li class="entry">
									<div class="meta">
										<span>{entryNumber}</span>
										<time datetime={post.frontmatter.pubDate}>
											{new Date(post.frontmatter.pubDate).toLocaleDateString('en-CA')}
										</time>
									</div>
									<a href={post.url} class="title-link">
										{post.frontmatter.title}
									</a>
								</li>
							)
						})}
					</ul>
				</main>
			</div>
		</div>
	</body>
</html>